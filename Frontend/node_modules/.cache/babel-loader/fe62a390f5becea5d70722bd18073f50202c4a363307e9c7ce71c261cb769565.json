{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{useAuth}from'../../context/AuthContext';import AuthService from'../../services/AuthService';import'../../styles/UserLogin.css';import{toast}from'react-hot-toast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UserLogin(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const navigate=useNavigate();const{login}=useAuth();async function loginUser(event){event.preventDefault();let userRequest={email:email,password:password};try{const res=await AuthService.authenticateUser(userRequest);if(res.data.message==='Email not exists'){toast.error('Email not exists');}else if(res.data.message==='Login Success'){toast.success('Login success');login(res.data.user.user_id,res.data.token,res.data.user.role);if(res.data.user.role==='ROLE_ADMIN'){navigate('/admin-home');}else if(res.data.user.role==='ROLE_USER'){navigate('/user-home');}else{// Handle other roles as needed\ntoast.error('Unsupported role');}}else{toast.error('Incorrect Email and Password not match');}}catch(err){toast.error('Error logging in');console.error(err);}}return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 mx-auto\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",placeholder:\"Enter Email\",value:email,onChange:event=>setEmail(event.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",placeholder:\"Enter Password\",value:password,onChange:event=>setPassword(event.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",onClick:loginUser,children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-primary\",children:\"Register here\"})]})})})]})})})})});}export default UserLogin;","map":{"version":3,"names":["React","useState","Link","useNavigate","useAuth","AuthService","toast","jsx","_jsx","jsxs","_jsxs","UserLogin","email","setEmail","password","setPassword","navigate","login","loginUser","event","preventDefault","userRequest","res","authenticateUser","data","message","error","success","user","user_id","token","role","err","console","className","children","type","id","placeholder","value","onChange","target","onClick","to"],"sources":["/Users/aakashsikarwar/Desktop/React SpringBoot App/travel_plan_management_system1/src/components/AuthComponents/UserLogin.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport AuthService from '../../services/AuthService';\nimport '../../styles/UserLogin.css';\nimport { toast } from 'react-hot-toast';\n\nfunction UserLogin() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  const { login } = useAuth();\n\n  async function loginUser(event) {\n    event.preventDefault();\n\n    let userRequest = {\n      email: email,\n      password: password,\n    };\n\n    try {\n      const res = await AuthService.authenticateUser(userRequest);\n\n      if (res.data.message === 'Email not exists') {\n        toast.error('Email not exists');\n      } else if (res.data.message === 'Login Success') {\n        toast.success('Login success');\n        login(res.data.user.user_id, res.data.token, res.data.user.role);\n        if (res.data.user.role === 'ROLE_ADMIN') {\n          navigate('/admin-home');\n        } else if (res.data.user.role === 'ROLE_USER') {\n          navigate('/user-home');\n        } else {\n          // Handle other roles as needed\n          toast.error('Unsupported role');\n        }\n      } else {\n        toast.error('Incorrect Email and Password not match');\n      }\n    } catch (err) {\n      toast.error('Error logging in');\n      console.error(err);\n    }\n  }\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-sm-6 mx-auto\">\n            <form className=\"login-form\">\n              <h2>Login</h2>\n              <hr />\n\n              <div className=\"form-group\">\n                <label>Email</label>\n                <input\n                  type=\"email\"\n                  className=\"form-control\"\n                  id=\"email\"\n                  placeholder=\"Enter Email\"\n                  value={email}\n                  onChange={(event) => setEmail(event.target.value)}\n                />\n              </div>\n\n              <div className=\"form-group\">\n                <label>Password</label>\n                <input\n                  type=\"password\"\n                  className=\"form-control\"\n                  id=\"password\"\n                  placeholder=\"Enter Password\"\n                  value={password}\n                  onChange={(event) => setPassword(event.target.value)}\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary btn-block\"\n                onClick={loginUser}\n              >\n                Login\n              </button>\n\n              <div className=\"row mt-3\">\n                <div className=\"col-sm-6\">\n                  <span>\n                    Don't have an account?{' '}\n                    <Link to=\"/register\" className=\"text-primary\">\n                      Register here\n                    </Link>\n                  </span>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default UserLogin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}